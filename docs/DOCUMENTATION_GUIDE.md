# 文档维护指南

本文档说明项目文档的维护规范和最佳实践。

## 📋 文档维护原则

### 1. 何时创建新文档

**创建新文档的场景：**
- ✅ 添加全新的系统模块或功能
- ✅ 引入新的技术栈或架构
- ✅ 创建新的工具或脚本
- ✅ 用户明确要求创建文档

**不应该创建新文档：**
- ❌ 内容可以添加到现有文档时
- ❌ 为了记录小的代码变更
- ❌ 重复已有文档的内容
- ❌ 只是重新组织现有信息

**原则：优先更新现有文档 > 创建新文档**

### 2. 何时更新文档

**必须更新文档的场景：**
- ✅ 修改 API 端点（参数、返回值、行为）
- ✅ 改变系统架构或模块关系
- ✅ 修改配置文件结构或默认值
- ✅ 更新依赖版本（如需要不同的安装步骤）
- ✅ 修复 bug 导致行为变化
- ✅ 添加或修改重要功能

**文档更新时机：**
1. **代码变更前**：对于架构性变更，先更新设计文档
2. **代码变更时**：添加清晰的代码注释
3. **代码变更后**：立即更新相关文档，不要延迟

### 3. 文档内容要求

#### What（是什么）
- 功能、模块、API 的描述
- 参数、返回值、数据结构
- 使用方法和示例

#### Why（为什么）
- 设计决策的依据
- 为什么选择这个方案
- 考虑了哪些替代方案
- 有什么限制或trade-off

#### How（怎么做）
- 具体的操作步骤
- 配置方法
- 故障排查指南

### 4. 文档质量标准

**清晰性：**
- ✅ 读者能在 **5 分钟内**理解核心内容
- ✅ 使用简洁明了的语言
- ✅ 避免模棱两可的表述
- ✅ 使用中文书写（本项目要求）

**完整性：**
- ✅ 包含必要的上下文信息
- ✅ 提供完整的示例代码
- ✅ 说明前置条件和依赖
- ✅ 记录已知问题和限制

**实用性：**
- ✅ 言之有物，不死套格式
- ✅ 提供实际可运行的示例
- ✅ 包含常见问题和解决方案
- ✅ 使用表格、列表等结构化格式

**及时性：**
- ✅ 与代码保持同步
- ✅ 及时反映最新变更
- ✅ 标注过时的内容并更新

## 📂 文档结构规范

### 项目文档目录结构

```
docs/
├── README.md                    # 文档索引
├── QUICK_START.md              # 快速开始指南
├── DOCUMENTATION_GUIDE.md      # 本文件 - 文档维护指南
├── CHANGELOG.md                # 变更日志（版本管理）
├── backend/                    # 后端文档
│   ├── API_GUIDE.md           # API 使用指南
│   ├── ARCHITECTURE.md        # 架构文档
│   └── RAG_SYSTEM.md          # RAG 系统说明
├── frontend/                   # 前端文档
│   └── FRONTEND_GUIDE.md      # 前端使用指南
└── tools/                      # 工具文档
    └── STUDIO_GUIDE.md        # Studio 使用指南
```

### 文档命名规范

- 使用 **大写 + 下划线** 命名：`API_GUIDE.md`, `QUICK_START.md`
- 使用描述性名称，让人一看就知道内容
- 避免使用版本号在文件名中（使用 git 管理版本）

### 文档格式规范

**Markdown 格式：**
```markdown
# 文档标题

简短的文档概述（1-2句话）

## 目录（可选，长文档需要）

## 第一部分

### 子节

内容...

#### 更小的节（不推荐超过4级标题）

## 示例

\`\`\`bash
# 代码示例
\`\`\`

## 常见问题

### Q: 问题？
**A**: 答案

## 参考资料

- [相关文档](./OTHER.md)
```

**关键要素：**
1. **标题层次清晰**：使用 `#`, `##`, `###` 等
2. **代码块**：使用三个反引号包裹，指定语言
3. **链接**：相对路径引用其他文档
4. **列表**：使用 `-` 或 `1.` 创建列表
5. **强调**：使用 `**粗体**` 和 `*斜体*`
6. **表格**：复杂数据使用表格展示
7. **emoji**：适当使用 emoji 提升可读性（如 ✅ ❌ 🚀）

## 🔄 文档更新工作流

### 开发者工作流

```
1. 开始开发新功能
   ↓
2. 是否需要文档？
   ├─ 是 → 继续
   └─ 否 → 直接开发
   ↓
3. 是新功能还是修改？
   ├─ 新功能 → 考虑创建新文档或扩展现有文档
   └─ 修改 → 更新现有文档
   ↓
4. 编写/更新文档草稿
   ↓
5. 实现代码
   ↓
6. 完善文档（添加实际示例、测试结果）
   ↓
7. 更新 CHANGELOG.md（如果是重要变更）
   ↓
8. 提交代码和文档
```

### AI 助手工作流

AI 编程助手在协助开发时应该：

**代码变更前：**
- 告知用户将要做什么、为什么这样做
- 如果涉及架构变更，先讨论方案

**代码变更时：**
- 在代码中添加清晰的中文注释
- 记录关键决策点和原因

**代码变更后：**
- 主动检查是否需要更新文档
- 更新相关文档（API、架构、README等）
- 提醒用户文档已更新

**AI 应该主动提醒更新文档的场景：**
- 修改了公共 API 接口
- 改变了系统架构或模块关系
- 引入新的依赖或技术栈
- 修改了核心算法或业务逻辑
- 发现文档与代码不一致

## 📝 各类文档的维护要点

### API 文档（API_GUIDE.md）

**必须包含：**
- 端点路径和 HTTP 方法
- 请求参数（类型、必填/可选、说明）
- 请求体示例（JSON）
- 响应格式和示例
- 错误码和错误处理
- 认证方式
- 使用示例（curl 或代码）

**更新时机：**
- 添加/删除/修改端点
- 修改参数或返回值
- 修改认证方式
- 修改错误处理

### 架构文档（ARCHITECTURE.md）

**必须包含：**
- 系统整体架构图
- 各模块的职责和关系
- 数据流向
- 关键设计决策和原因
- 性能考虑
- 可扩展性设计

**更新时机：**
- 重大架构调整
- 添加新的核心模块
- 修改数据流或交互方式
- 性能优化改变了设计

### 使用指南（GUIDE.md）

**必须包含：**
- 功能介绍
- 安装和配置步骤
- 使用示例
- 常见问题和解决方案
- 故障排查

**更新时机：**
- 添加新功能
- 修改配置方式
- 发现新的常见问题
- 依赖或环境变化

### README.md

**必须包含：**
- 项目简介（1-2句话）
- 核心功能
- 快速开始（5分钟内能运行）
- 文档链接
- 技术栈
- 贡献指南
- 许可证

**更新时机：**
- 项目定位或目标变化
- 添加重要新功能
- 技术栈变化
- 快速开始步骤变化

## ⚠️ 文档维护的常见问题

### 问题1：文档滞后于代码

**原因：**
- 只在代码完成后才想起文档
- 觉得"以后再补"

**解决方案：**
- 将文档更新作为开发任务的一部分
- Code Review 时检查文档是否同步
- 使用 TODO 或 Issue 追踪文档任务

### 问题2：文档过于冗长

**原因：**
- 试图记录所有细节
- 没有突出重点

**解决方案：**
- 遵循 "5分钟原则"：核心内容5分钟能看懂
- 使用层次结构，让读者按需深入
- 将详细内容放到单独的文档或章节

### 问题3：文档难以维护

**原因：**
- 文档散落在各处
- 没有统一的格式和规范
- 内容重复

**解决方案：**
- 统一存放在 `docs/` 目录
- 遵循文档命名和格式规范
- 定期检查和合并重复内容

### 问题4：不知道该记录什么

**原则：**
- 记录 **不显而易见** 的内容
- 记录 **Why**（为什么），而不只是 **What**（是什么）
- 记录 **决策过程**，不只是结果
- 如果你在代码中写了注释，考虑是否该放到文档中

## 📊 文档质量检查清单

在提交文档前，检查：

### 内容检查
- [ ] 是否包含必要的 What、Why、How
- [ ] 是否有实际可运行的示例
- [ ] 是否说明了前置条件和依赖
- [ ] 是否记录了已知限制和问题
- [ ] 链接是否正确且有效

### 格式检查
- [ ] Markdown 格式是否正确
- [ ] 标题层次是否清晰
- [ ] 代码块是否指定了语言
- [ ] 表格是否对齐且易读
- [ ] 是否有适当的空行和分段

### 可读性检查
- [ ] 是否能在5分钟内理解核心内容
- [ ] 是否使用了简洁明了的语言
- [ ] 是否避免了专业黑话（或已解释）
- [ ] 是否使用了结构化格式（列表、表格）
- [ ] 是否使用了中文书写

### 完整性检查
- [ ] 是否覆盖了所有重要的使用场景
- [ ] 是否包含了常见问题的解决方案
- [ ] 是否说明了与其他模块的关系
- [ ] 是否提供了进一步学习的资源

## 🔗 相关资源

- [项目 README](../README.md) - 项目总览
- [文档索引](./README.md) - 所有文档列表
- [变更日志](./CHANGELOG.md) - 版本变更历史

---

**记住：好的文档是项目成功的关键组成部分！** 📚

